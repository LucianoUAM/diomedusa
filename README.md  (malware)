 Simula√ß√£o de Ransomware e Keylogger em Ambiente Controlado com Python

> Projeto **did√°tico**, executado em ambiente isolado, para estudar o funcionamento b√°sico de **ransomware** e **keylogger** simulados em Python e documentar medidas de defesa.

---

## üß† Objetivos

- Entender, na pr√°tica, **como funcionam**:
  - Um **ransomware simulado** (criptografia de arquivos de teste).
  - Um **keylogger simulado** (captura de teclas e registro em log).
- Registrar **c√≥digos parciais** e conceitos, sem criar malware funcional.
- Refletir sobre **preven√ß√£o, detec√ß√£o e resposta** em seguran√ßa da informa√ß√£o.

---

## üß™ Ambiente de Testes

Todo o projeto foi feito em um **ambiente 100% controlado**:

- M√°quina de testes sem dados pessoais ou corporativos.
- Pastas espec√≠ficas apenas para arquivos de laborat√≥rio.
- Apenas arquivos fict√≠cios, como `.txt` de teste.

Exemplo de prepara√ß√£o de diret√≥rio (Linux):

```bash
mkdir laboratorio_ransom
cd laboratorio_ransom
echo "arquivo de teste 1" > contrato_teste1.txt
echo "arquivo de teste 2" > relatorio_teste2.txt

mkdir ../laboratorio_keylogger
üîê Ransomware Simulado
Ideia Geral
O ‚Äúransomware‚Äù deste laborat√≥rio:

Lista arquivos de teste em um diret√≥rio.

Simula a criptografia do conte√∫do.

Sobrescreve ou altera os arquivos.

Cria uma nota de ‚Äúresgate‚Äù (simula√ß√£o).

Possui l√≥gica inversa para ‚Äúdescriptografar‚Äù e restaurar os arquivos.

Estrutura do C√≥digo (trechos)
Listagem de arquivos de teste (.txt):

python
Copiar c√≥digo
import os

def listar_arquivos(diretorio):
    arquivos_encontrados = []
    for raiz, pastas, arquivos in os.walk(diretorio):
        for nome in arquivos:
            if nome.endswith(".txt"):  # foco em arquivos de teste
                caminho = os.path.join(raiz, nome)
                arquivos_encontrados.append(caminho)
    return arquivos_encontrados
Simula√ß√£o de criptografia (pseudoc√≥digo ‚Äì n√£o funcional):

python
Copiar c√≥digo
def criptografar_arquivo(caminho_arquivo, chave):
    with open(caminho_arquivo, "rb") as f:
        dados = f.read()

    # Aqui entraria a chamada real de criptografia:
    # dados_cifrados = cifrar(dados, chave)  <-- pseudoc√≥digo
    dados_cifrados = b"[DADOS CIFRADOS EXEMPLO]"  # simula√ß√£o

    with open(caminho_arquivo, "wb") as f:
        f.write(dados_cifrados)
Cria√ß√£o da ‚Äúnota de resgate‚Äù simulada:

python
Copiar c√≥digo
def criar_nota_resgate(diretorio):
    caminho_nota = os.path.join(diretorio, "README_RESGATE.txt")
    with open(caminho_nota, "w", encoding="utf-8") as f:
        f.write("Seus arquivos de TESTE foram criptografados (simula√ß√£o).\n")
        f.write("Este laborat√≥rio tem fins exclusivamente educacionais.\n")
Execu√ß√£o t√≠pica no laborat√≥rio:

bash
Copiar c√≥digo
cd laboratorio_ransom
python ransomware_simulado.py
Ap√≥s a execu√ß√£o:

Arquivos de teste ficaram ileg√≠veis (conte√∫do alterado pela simula√ß√£o).

Foi criada a nota de ‚Äúresgate‚Äù.

Um segundo script/trecho, usando a mesma chave, reverteu o processo (simula√ß√£o de descriptografia).

‚å®Ô∏è Keylogger Simulado
Ideia Geral
O keylogger simulado teve como objetivo:

Entender a captura de teclas.

Registrar as teclas em um arquivo de log.

Simular o envio do log por e-mail (conceitual).

Importante: foram digitados apenas textos de teste, em ambiente isolado.

Estrutura Conceitual (pseudoc√≥digo)
Buffer de teclas e grava√ß√£o peri√≥dica em arquivo:

python
Copiar c√≥digo
# Pseudoc√≥digo de keylogger SIMULADO

log_teclas = []

def ao_pressionar_tecla(tecla):
    texto = str(tecla)
    log_teclas.append(texto)

    # Quando atingir um certo tamanho, salva no arquivo
    if len(log_teclas) >= 20:
        salvar_em_arquivo(log_teclas)
        log_teclas.clear()

def salvar_em_arquivo(lista_teclas):
    with open("log_teclas_teste.txt", "a", encoding="utf-8") as f:
        f.write("".join(lista_teclas))
Loop principal (mantido em n√≠vel conceitual, n√£o completo):

python
Copiar c√≥digo
# Pseudoc√≥digo:
# registrar_funcoes_de_callback(ao_pressionar_tecla)
# manter_programa_em_execucao()
Simula√ß√£o de envio por e-mail (conceito):

python
Copiar c√≥digo
# Pseudoc√≥digo:
# 1. ler "log_teclas_teste.txt"
# 2. montar corpo do e-mail com o conte√∫do do log
# 3. enviar via SMTP configurado apenas para o laborat√≥rio
üõ°Ô∏è Medidas de Defesa e Preven√ß√£o
A partir das simula√ß√µes, foram registradas as principais defesas:

Antiv√≠rus / EDR
Identifica√ß√£o de:

Processos que modificam muitos arquivos rapidamente (padr√£o de ransomware).

Processos que registram eventos de teclado e escrevem logs (padr√£o de keylogger).

Gera√ß√£o de alertas, isolamento do processo e coleta de evid√™ncias.

Firewall e Rede
Bloquear conex√µes de sa√≠da suspeitas.

Monitorar tentativas de exfiltra√ß√£o de dados (envio de grandes logs, conex√µes a dom√≠nios estranhos).

Sandboxing
Abrir anexos potencialmente maliciosos em sandbox antes de liberar para o ambiente real.

Observar comportamentos como:

Enumera√ß√£o de muitos arquivos.

Criptografia em massa.

Captura de teclado.

Backups
Backups recorrentes e, se poss√≠vel, offline.

Permitem restaurar dados em caso de ataque de ransomware, sem depender de ‚Äúresgate‚Äù.

Princ√≠pio do Menor Privil√©gio
Usu√°rios sem privil√©gios de administrador por padr√£o.

Mesmo que um malware seja executado, seu impacto √© limitado.

Conscientiza√ß√£o do Usu√°rio
N√£o abrir anexos ou links suspeitos.

Desconfiar de mensagens urgentes pedindo cliques ou credenciais.

Entender que engenharia social √© frequentemente a porta de entrada do ataque.

üìö Aprendizados
Um ransomware n√£o precisa apagar arquivos: basta torn√°-los ileg√≠veis por criptografia.

Um keylogger, mesmo simples, √© suficiente para capturar senhas, mensagens e dados sens√≠veis.

O problema n√£o √© s√≥ o c√≥digo em si, mas:

A forma de distribui√ß√£o,

A falta de prote√ß√µes no endpoint,

E a falta de conscientiza√ß√£o dos usu√°rios.
